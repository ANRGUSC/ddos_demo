#!/usr/bin/env python3

import socket


def test_ip_connection(ip, port, timeout=5):
    try:
        sock = socket.socket(socket.AF_INET, socket.SOCK_STREAM)
        sock.settimeout(timeout)
        sock.connect((ip, port))
        print(f"Success: Connection to {ip}:{port} is successful")
        sock.close()
    except socket.error:
        print(f"Error: Connection to {ip}:{port} failed")

ip_list = [
        '192.168.1.160',
        '192.168.1.159',
        '192.168.1.166',
        '192.168.1.157',
        '192.168.1.187',
        '192.168.1.198',
        '192.168.1.108',
        '192.168.1.109',
        '192.168.1.110',
        '192.168.1.111',
        '192.168.1.112',
        '192.168.1.113',
        '192.168.1.114',
        '192.168.1.115',
        '192.168.1.116',
        '192.168.1.117',
        '192.168.1.118',
        '192.168.1.119',
        '192.168.1.120',
        '192.168.1.121',
        '192.168.1.122',
        '192.168.1.123',
        '192.168.1.124',
        '192.168.1.125',
        '192.168.1.126',
        '192.168.1.127',
        '192.168.1.129',
        '192.168.1.130',
        '192.168.1.131',
        '192.168.1.132',
        '192.168.1.133',
        '192.168.1.134',
        '192.168.1.135',
        '192.168.1.136',
        '192.168.1.137',
        '192.168.1.138',
        '192.168.1.139',
        '192.168.1.141',
        '192.168.1.142',
        '192.168.1.143',
        '192.168.1.144',
        '192.168.1.145',
        '192.168.1.146',
        '192.168.1.147',
        '192.168.1.148',
        '192.168.1.149',
        '192.168.1.150',
        '192.168.1.151',
        '192.168.1.152',
    ]
ip_to_test = "192.168.1.1"
port_to_test = 22
for ip in ip_list:
    test_ip_connection(ip, port_to_test)
